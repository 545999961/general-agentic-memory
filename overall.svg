<svg width="800" height="750" viewBox="0 0 800 750" xmlns="http://www.w3.org/2000/svg">
  <!-- 背景 -->
  <rect width="800" height="750" fill="#ffffff" />
  
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333" />
    </marker>
  </defs>

  <style>
    .text { font-family: 'Arial', sans-serif; font-size: 14px; fill: #000000; font-weight: bold; }
    .title { font-weight: bold; font-size: 22px; fill: #000000; text-anchor: middle; }
    .label { font-size: 13px; fill: #333; font-weight: bold; }
    .abc-tag { font-size: 11px; fill: #555; font-weight: normal; }
    .impl-tag { font-size: 10px; fill: #888; font-weight: normal; }
    .box { stroke-width: 2.5; }
    .ground-box { stroke-width: 5; }
  </style>

  <!-- 1. Workflow (Entrance) -->
  <polygon points="400,30 580,70 400,110 220,70" fill="#f5f5f5" stroke="#333" stroke-width="3" />
  <text x="400" y="60" class="text" text-anchor="middle">BaseWorkflow</text>
  <text x="400" y="78" class="abc-tag" text-anchor="middle">(系统选型与全局配置)</text>
  <text x="400" y="95" class="impl-tag" text-anchor="middle">TextWorkflow / VideoWorkflow</text>

  <!-- 2. Logic Layer -->
  <rect x="50" y="160" width="700" height="135" rx="10" fill="none" stroke="#ddd" stroke-dasharray="5,5" />
  <text x="100" y="150" class="text">逻辑处理层 (Agents)</text>

  <rect x="100" y="180" width="200" height="95" rx="8" fill="#ffecf5" stroke="#cc0066" class="box" />
  <text x="200" y="215" class="text" text-anchor="middle">BaseGAMAgent</text>
  <text x="200" y="233" class="abc-tag" text-anchor="middle">(记忆构建者)</text>
  <text x="200" y="255" class="impl-tag" text-anchor="middle">TextGAMAgent / VideoGAMAgent</text>

  <rect x="500" y="180" width="200" height="95" rx="8" fill="#ffecf5" stroke="#cc0066" class="box" />
  <text x="600" y="215" class="text" text-anchor="middle">BaseChatAgent</text>
  <text x="600" y="233" class="abc-tag" text-anchor="middle">(交互响应者)</text>
  <text x="600" y="255" class="impl-tag" text-anchor="middle">TextChatAgent / VideoChatAgent</text>

  <!-- 3. Memory Layer -->
  <rect x="50" y="340" width="700" height="100" rx="10" fill="none" stroke="#ddd" stroke-dasharray="5,5" />
  <text x="100" y="330" class="text">记忆资产层 (Memory)</text>

  <rect x="275" y="355" width="250" height="70" rx="8" fill="#eaffef" stroke="#00cc44" class="box" />
  <text x="400" y="382" class="text" text-anchor="middle">BaseTree / Node</text>
  <text x="400" y="400" class="abc-tag" text-anchor="middle">(层级化逻辑结构)</text>
  <text x="400" y="416" class="impl-tag" text-anchor="middle">GAMTree / VideoGAMTree</text>

  <!-- 4. Infrastructure Layer (Foundation) -->
  <rect x="50" y="500" width="700" height="220" rx="20" fill="#f0f7ff" stroke="#0066cc" stroke-width="3" />
  <text x="400" y="490" class="title">核心基础设施层 (Foundation)</text>

  <rect x="150" y="545" width="500" height="140" rx="15" fill="#d6eaff" stroke="#0066cc" class="ground-box" />
  <text x="400" y="595" class="text" text-anchor="middle" font-size="20px">BaseWorkspace</text>
  <text x="400" y="625" class="abc-tag" text-anchor="middle" font-size="16px">(物理环境的文件系统 linux/docker)</text>
  <text x="400" y="650" class="impl-tag" text-anchor="middle" font-size="12px">LocalWorkspace / DockerWorkspace</text>

  <!-- Connections -->
  
  <!-- Workflow to Agents -->
  <path d="M300 100 L200 180" stroke="#333" stroke-width="2.5" fill="none" marker-end="url(#arrowhead)" />
  <path d="M500 100 L600 180" stroke="#333" stroke-width="2.5" fill="none" marker-end="url(#arrowhead)" />

  <!-- GAM Building Flow -->
  <path d="M150 275 L150 545" stroke="#333" stroke-width="2" fill="none" marker-end="url(#arrowhead)" />
  <text x="100" y="420" class="label">2.产生 bash/docker 命令</text>
  <path d="M250 545 L250 275" stroke="#333" stroke-width="2" fill="none" marker-end="url(#arrowhead)" />
  <text x="255" y="420" class="label">3.完成命令</text>
  <path d="M300 230 Q400 230 400 355" stroke="#333" stroke-width="2" fill="none" stroke-dasharray="5,5" marker-end="url(#arrowhead)" />
  <text x="420" y="295" class="label">5.读取目录结构</text>

  <!-- Chat Execution Flow -->
  <path d="M500 230 Q400 230 400 355" stroke="#333" stroke-width="2" fill="none" stroke-dasharray="5,5" marker-end="url(#arrowhead)" />
  <text x="310" y="293" class="label">4.映射构建</text>
  
  <path d="M600 275 L600 545" stroke="#333" stroke-width="2" fill="none" marker-end="url(#arrowhead)" />
  <text x="605" y="420" class="label">6.与 GAM 交互 (via BaseTool)</text>
  <path d="M550 545 L550 275" stroke="#333" stroke-width="2" fill="none" stroke-dasharray="2,2" marker-end="url(#arrowhead)" />
  <text x="500" y="460" class="label">7.交互反馈</text>

</svg>
